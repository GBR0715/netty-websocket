server:
  port: 9080

spring:
  application:
    name: netty-websocket-server
  
  # Redis配置，用于分布式WebSocket会话共享
  redis:
    host: localhost
    port: 6379
    database: 0
    #password:

  # 日志配置
  logging:
    level:
      org.springframework.data.redis: INFO
      com.example.nettywebsocket: INFO

# 自定义Netty配置
netty:
  websocket:
    port: 9081
    bossGroupThreads: 2
    workerGroupThreads: 16
    maxFramePayloadLength: 65536
    # WebSocket连接空闲超时时间（秒），默认3分钟
    idleTimeout: 1800

# WebSocket安全配置
websocket:
  security:
    token:
      # 是否启用外部token验证接口
      external:
        enable: false
        # 外部token验证接口URL
        validate-url: http://localhost:8080/api/auth/validate-token
        # 外部获取用户信息接口URL
        user-info-url: http://localhost:8080/api/auth/user-info
        # 外部接口请求超时时间（毫秒）
        timeout: 3000
      # 是否在外部接口失败时回退到本地验证
      fallback-to-local: false
      # Redis token存储配置
      redis:
        # token过期时间（秒），默认1小时
        expire-time: 3600
